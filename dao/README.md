# DAO

## О чём речь

Это репозиторий предназначен для того, чтобы дать вам все знания, необходимые для создания DAO и управления.

Существует 2 основных вида управления.

| Особенность | Управление на цепочке | Гибридное управление.
| ---------- | ------------------- | ----------------------------- |
| Затраты на газ | Дороже | Дешевле | дешевле
| Компоненты | Только блокчейн | Оракул или доверенный мультисигнал.

### На цепочке

Типичная структура управления на цепочке может выглядеть следующим образом: 
- Голосование на основе ERC20 происходит на проекте типа [Tally](https://www.tally.xyz/), но гипотетически может осуществляться пользователями, вручную вызывающими функции голосования. 
- Любой может выполнить предложение, как только оно пройдет голосование. Примеры [Compound](https://compound.finance/governance).

Цепочечное управление может быть намного дороже, но в нем задействовано меньше деталей, а инструментарий все еще находится в стадии разработки. 

### Гибридное

Типичное гибридное управление с оракулом может выглядеть следующим образом:
- Голосование на основе ERC20 происходит в проекте типа [Snapshot](https://snapshot.org/#/).
- Оракул типа [Chainlink](https://chain.link/) используется для децентрализованного получения и исполнения ответов.

Типичное гибридное управление с доверенным мультисигом может выглядеть следующим образом:
- Голосование на основе ERC20 происходит на проекте типа [Snapshot](https://snapshot.org/#/).
- Доверенная [gnosis мультиподпись](https://gnosis-safe.io/) используется для анализа результатов Snapshot.
_Примеры: [Snapsafe](https://blog.gnosis.pm/introducing-safesnap-the-first-in-a-decentralized-governance-tool-suite-for-the-gnosis-safe-ea67eb95c34f)_.

Гибридное управление намного дешевле и так же безопасно, но инструментарий все еще находится в стадии разработки. 

## Инструменты
- [Snapshot](https://snapshot.org/#/)
  - Пользовательский интерфейс для внецепочечного голосования / анализа настроений
- [Tally](https://www.withtally.com/)
  - Пользовательский интерфейс для внутрицепочечного голосования
- [Gnosis Safe](https://gnosis-safe.io/)
  - Мульти-сигма
- [Openzeppelin](https://docs.openzeppelin.com/contracts/4.x/api/governance)
  - Инструменты для работы с кодом DAO
- [Zodiac](https://github.com/gnosis/zodiac)
  - Другие инструменты для работы с кодом DAO
- [Openzeppelin Defender](https://openzeppelin.com/defender/)
  - A tool to propose governance and other contract functions. 

### Без кода

Инструменты, которые помогут запустить DAO без необходимости писать код и размещать контракты.

- [DAO Stack](https://alchemy.daostack.io/daos/create)
- [Aragon](https://aragon.org/)
- [Colony](https://colony.io/)
- [DAOHaus](https://app.daohaus.club/summon)
- [DAO Leaderboard](https://deepdao.io/#/deepdao/dashboard)


## Требования

- [git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)
- [Nodejs](https://nodejs.org/en/)
- [Yarn](https://classic.yarnpkg.com/lang/en/docs/install/) вместо `npm`.


### Установка

1. Скачать репо:
```
git clone https://github.com/druzhcom/web3-developer
cd web3-developer/dao
```

2. Установите зависимости
``sh
yarn
``

3. Запустите проверки (который также обладает всеми функциональными возможностями)

```
yarn hardhat test
```

Если вы хотите развернуть в тестовой сети:

4. Добавьте файл `.env` с тем же содержимым `.env.example`, но замененным на ваши переменные.

## Использование
### Пример управления на цепочке

Вот краткое описание того, что делает набор тестов. 

1. Мы развернем токен ERC20, который будем использовать для управления нашей DAO.
2. Мы развернем контракт Timelock, который мы будем использовать для обеспечения буфера между выполнением предложений.
   1. Примечание: ** Timelock - это контракт, который будет обрабатывать все деньги, права собственности и т.д.**.
3. Мы развернем наш контракт Governence. 
   1. Примечание: **Контракт Governance отвечает за предложения и т.д., а Timelock выполняет!
4. Мы развернем простой контракт Box, который будет принадлежать нашему процессу управления! (он же наш контракт Timelock).
5. Мы предложим новое значение для добавления в наш Box-контракт.
6. Затем мы проголосуем по этому предложению.
7. Затем мы поставим предложение в очередь на выполнение.
8. Затем мы выполним его!

Кроме того, вы можете сделать все это вручную в своей локальной сети следующим образом:

1. Настройка локального блокчейна 
```
yarn hardhat node
```

2. Предложите новую ценность, которая будет добавлена к нашему контракту Box

Во втором терминале (оставьте свой блокчейн запущенным)
```
yarn hardhat run scripts/propose.ts --network localhost
```

3. Проголосовать по этому предложению

```
yarn hardhat run scripts/vote.ts --network localhost
```

4. Очередь и выполнение предложения!

```
yarn hardhat run scripts/queue-and-execute.ts --network localhost
```

Вы также можете использовать [Openzeppelin contract wizard](https://wizard.openzeppelin.com/#governor), чтобы заставить другие контракты работать с вариациями этого контракта управления. 

### Пример управления вне цепочки

Разверните свой ERC20 и [сделайте предложения в snapshot](https://docs.snapshot.org/proposals/create).

## Дорожная карта

- [] Добавить примеры обновляемости с прокси-шаблоном UUPS
- [] Добавить пример интеграции Chainlink Oracle с Snapsafe.

Полный список предлагаемых возможностей (и известных проблем) смотрите в [открытых проблемах](https://github.com/PatrickAlphaC/dao-template/issues).